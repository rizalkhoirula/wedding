<template>

	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-xs-2">
					<div id="fh5co-logo"><a href="#">Wedding<strong>.</strong></a></div>
				</div>
				
			</div>
			
		</div>
	</nav>
	<header id="fh5co-header" class="fh5co-cover" role="banner" style="background-image:url(images/imgbgtest.jpg);" data-stellar-background-ratio="0.5">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 text-center">
        <div class="display-t">
          <div class="display-tc animate-box" data-animate-effect="fadeIn">
            <h1>Joefrey &amp; Sheila</h1>
			<h2 id="guest-name">Kepada Yth: </h2> 
			<div class="simply-countdown simply-countdown-one"></div>
			<br>
            <p><a href="#" id="unlock-button" class="btn btn-default btn-sm">Buka Undangan</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<div id="fh5co-couple">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
        <h2>Hello!</h2>
        <h3>November 28th, 2016 New York, USA</h3>
        <p>We invited you to celebrate our wedding</p>
      </div>
    </div>
    <div class="couple-wrap animate-box">
      <div class="couple-half">
        <div class="groom">
          <img src="\images\couple1.jpg"class="img-responsive">
        </div>
        <div class="desc-groom">
          <h3>Joefrey Mahusay</h3>
          <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove</p>
        </div>
      </div>
      <p class="heart text-center"><i class="icon-heart2"></i></p>
      <div class="couple-half">
        <div class="bride">
          <img src="\images\couple2.jpg" class="img-responsive">
        </div>
        <div class="desc-bride">
          <h3>Sheila Mahusay</h3>
          <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove</p>
        </div>
      </div>
    </div>
  </div>
</div>

	<div id="fh5co-event" class="fh5co-bg" style="background-image:url(images/img_bg_3.jpg);">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
					<span>Our Special Events</span>
					<h2>Wedding Events</h2>
				</div>
				
			</div>
			
			<div class="row">
				<div class="display-t">
					<div class="display-tc">
						<div class="col-md-10 col-md-offset-1">
							<div class="col-md-6 col-sm-6 text-center">
								<div class="event-wrap animate-box">
									<h3>Main Ceremony</h3>
									<div class="event-col">
										<i class="icon-clock"></i>
										<span>4:00 PM</span>
										<span>6:00 PM</span>
									</div>
									<div class="event-col">
										<i class="icon-calendar"></i>
										<span>Monday 28</span>
										<span>November, 2016</span>
									</div>
									<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
								</div>
							</div>
							<div class="col-md-6 col-sm-6 text-center">
								<div class="event-wrap animate-box">
									<h3>Wedding Party</h3>
									<div class="event-col">
										<i class="icon-clock"></i>
										<span>7:00 PM</span>
										<span>12:00 AM</span>
									</div>
									<div class="event-col">
										<i class="icon-calendar"></i>
										<span>Monday 28</span>
										<span>November, 2016</span>
									</div>
									<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="fh5co-couple-story">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
					<span>We Love Each Other</span>
					<h2>Our Story</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-md-offset-0">
					<ul class="timeline animate-box">
						<li class="animate-box">
							<div class="timeline-badge" style="background-image:url(./images/fm.jpg);"></div>
							<div class="timeline-panel">
								<div class="timeline-heading">
									<h3 class="timeline-title">First We Meet</h3>
									<span class="date">December 25, 2015</span>
								</div>
								<div class="timeline-body">
									<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
								</div>
							</div>
						</li>
						<li class="timeline-inverted animate-box">
							<div class="timeline-badge" style="background-image:url(images/fd.jpg);"></div>
							<div class="timeline-panel">
								<div class="timeline-heading">
									<h3 class="timeline-title">First Date</h3>
									<span class="date">December 28, 2015</span>
								</div>
								<div class="timeline-body">
									<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
								</div>
							</div>
						</li>
						<li class="animate-box">
							<div class="timeline-badge" style="background-image:url(./images/rl.jpg);"></div>
							<div class="timeline-panel">
								<div class="timeline-heading">
									<h3 class="timeline-title">In A Relationship</h3>
									<span class="date">January 1, 2016</span>
								</div>
								<div class="timeline-body">
									<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
								</div>
							</div>
						</li>
			    	</ul>
				</div>
			</div>
		</div>
	</div>

	<div id="fh5co-gallery" class="fh5co-section-gray">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
					<span>Our Memories</span>
					<h2>Wedding Gallery</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
				</div>
			</div>
			<div class="row row-bottom-padded-md">
				<div class="col-md-12">
					<ul id="fh5co-gallery-list">
						
						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/1.jpg); "> 
						<a href="images/1.jpg">
							<div class="case-studies-summary">
								<span>14 Photos</span>
								<h2>Two Glas of Juice</h2>
							</div>
						</a>
					</li>
					<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/2.jpg); ">
						<a href="#" class="color-2">
							<div class="case-studies-summary">
								<span>30 Photos</span>
								<h2>Timer starts now!</h2>
							</div>
						</a>
					</li>


					<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/3.jpg); ">
						<a href="#" class="color-3">
							<div class="case-studies-summary">
								<span>90 Photos</span>
								<h2>Beautiful sunset</h2>
							</div>
						</a>
					</li>
					<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/4.jpg); ">
						<a href="#" class="color-4">
							<div class="case-studies-summary">
								<span>12 Photos</span>
								<h2>Company's Conference Room</h2>
							</div>
						</a>
					</li>

						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/5.jpg); ">
							<a href="#" class="color-3">
								<div class="case-studies-summary">
									<span>50 Photos</span>
									<h2>Useful baskets</h2>
								</div>
							</a>
						</li>
						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/6.jpg); ">
							<a href="#" class="color-4">
								<div class="case-studies-summary">
									<span>45 Photos</span>
									<h2>Skater man in the road</h2>
								</div>
							</a>
						</li>

						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/7.jpg); ">
							<a href="#" class="color-4">
								<div class="case-studies-summary">
									<span>35 Photos</span>
									<h2>Two Glas of Juice</h2>
								</div>
							</a>
						</li>

						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/3.jpg); "> 
							<a href="#" class="color-5">
								<div class="case-studies-summary">
									<span>90 Photos</span>
									<h2>Timer starts now!</h2>
								</div>
							</a>
						</li>
						<li class="one-third animate-box" data-animate-effect="fadeIn" style="background-image: url(images/1.jpg); ">
							<a href="#" class="color-6">
								<div class="case-studies-summary">
									<span>56 Photos</span>
									<h2>Beautiful sunset</h2>
								</div>
							</a>
						</li>
					</ul>		
				</div>
			</div>
		</div>
	</div>

	

	<div id="fh5co-testimonial">
  <div class="container">
    <div class="row">
      <div class="row animate-box">
        <div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
          <span>Best Wishes</span>
          <h2>Friends Wishes</h2>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 animate-box">
          <div class="wrap-testimony">
            <!-- Display the first testimonial outside the carousel -->
            <div class="owl-carousel-fullwidth">
              <div v-for="(ucapan, index) in ucapans.slice(1)" :key="ucapan.id" class="item">
                <div class="testimony-slide text-center">
                  <!-- <figure>
                    <img :src="ucapan.image" alt="user">
                  </figure> -->	
                  <span>{{ ucapan.name }}, via <a href="#" class="twitter">Website</a></span>
                  <blockquote>
                    <p>"{{ ucapan.message }}"</p>
                  </blockquote>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="fh5co-started" class="fh5co-bg" style="background-image:url(images/img_bg_4.jpg);">
    <div class="overlay"></div>
    <div class="container">
        <div class="row animate-box">
            <div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
                <h2>Are You Attending?</h2>
                <p>Fill out the form to let us know you're coming!</p>
            </div>
        </div>
        <div class="row animate-box">
            <div class="col-md-10 col-md-offset-1">
                <form @submit.prevent="submitForm" class="form-inline">
                    <div class="form-group col-md-4 col-sm-4">
                        <label for="name" class="sr-only">Name</label>
                        <input type="text" v-model="name" class="form-control" id="name" placeholder="Name" required>
                    </div>
                    <div class="form-group col-md-4 col-sm-4">
                        <label for="email" class="sr-only">Email</label>
                        <input type="email" v-model="email" class="form-control" id="email" placeholder="Email" required>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="wish" class="sr-only">Your Wish</label>
                        <textarea v-model="wish" class="form-control" id="wish" placeholder="Your wish..." rows="2" required></textarea>
                    </div>
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-default">I am Attending</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



	<footer id="fh5co-footer" role="contentinfo">
		<div class="container">

			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">&copy; Rizal Khoirul Anam.</small> 
						<small class="block">Designed by <a href="http://whatsapp.com/+6281230147253" target="_blank">Rizal Khoirul Anam </a> <br>Ayo beralih ke undangan online: <a href="http://rizalkhoirula.vercel.app/" target="_blank">Portofolio</a></small>
					</p>
					
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>


</template>

<script setup>
import { ref, onMounted, nextTick } from 'vue';
import axios from 'axios';

const ucapans = ref([]);
const name = ref('');
const email = ref('');
const wish = ref('');

// Function to fetch ucapans
const fetchUcapans = async () => {
  try {
    const response = await axios.get('https://apiinvit.vercel.app/api/ucapan');
    ucapans.value = response.data; // Assign fetched data to ucapans
  } catch (error) {
    console.error('Error fetching ucapans:', error);
  }
};

// Function to submit attendance form
const submitForm = async () => {
  try {
    const response = await axios.post('https://apiinvit.vercel.app/api/undangan', {
      name: name.value,
      email: email.value,
      ucapan: wish.value
    });
    console.log('Form submitted successfully:', response.data);
    alert('Your response has been submitted successfully!');
    // Reset form fields
    name.value = '';
    email.value = '';
    wish.value = '';
  } catch (error) {
    console.error('Error submitting the form:', error);
    alert('There was an error submitting your response. Please try again.');
  }
};

onMounted(async () => {
  await fetchUcapans();
  nextTick(() => {
    // Initialize the Owl Carousel after the DOM is updated
    $(".owl-carousel-fullwidth").owlCarousel({
      items: 1,
      loop: true,
      margin: 10,
      nav: false,
      autoplay: true,
      autoplayTimeout: 2000,
      autoplayHoverPause: true
    });
  });

  // Additional functionality
  const header = document.getElementById('fh5co-header');
  const unlockButton = document.getElementById('unlock-button');
  const coupleSection = document.getElementById('fh5co-couple');
  const guestNameElement = document.getElementById('guest-name');
  let isUnlocked = false;

  // Disable scroll initially
  document.body.classList.add('lock-scroll');

  // Unlock scroll on button click
  unlockButton.addEventListener('click', (e) => {
    e.preventDefault();
    smoothScroll(coupleSection.offsetTop, 800);
    isUnlocked = true;
    document.body.classList.remove('lock-scroll');
  });

  // Event to detect scroll
  window.addEventListener('scroll', () => {
    const headerHeight = header.offsetHeight;
    const scrollPosition = window.scrollY;

    // Enable or disable scroll based on position
    if (scrollPosition >= headerHeight && !isUnlocked) {
      document.body.classList.remove('lock-scroll');
    } else if (scrollPosition < headerHeight && !isUnlocked) {
      document.body.classList.add('lock-scroll');
    }
  });

  // Smooth scroll function
  const smoothScroll = (targetPosition, duration) => {
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    let startTime = null;

    const animationScroll = (currentTime) => {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const run = ease(timeElapsed, startPosition, distance, duration);
      window.scrollTo(0, run);
      if (timeElapsed < duration) requestAnimationFrame(animationScroll);
    };

    const ease = (t, b, c, d) => {
      t /= d / 2;
      if (t < 1) return c / 2 * t * t + b;
      t--;
      return -c / 2 * (t * (t - 2) - 1) + b;
    };

    requestAnimationFrame(animationScroll);
  };

  // Countdown setup
  const d = new Date(Date.now() + 200 * 120 * 120 * 2000);
  simplyCountdown('.simply-countdown-one', {
    year: d.getFullYear(),
    month: d.getMonth() + 1,
    day: d.getDate()
  });

  // Get URL parameter
  const getParameterByName = (name) => {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  };

  // Update guest name element
  const guestName = getParameterByName('u');
  guestNameElement.textContent += guestName ? ` ${guestName}` : ' Tamu Terhormat';
});
</script>





<style>
body.lock-scroll {
  overflow: hidden;
}
.simply-countdown {
    font-size: 5px; /* Atur ukuran countdown agar lebih kecil */
    line-height: 1;   /* Mengurangi jarak antar baris */
    padding: 5px;     /* Mengatur jarak di sekitar countdown */
}

</style>
